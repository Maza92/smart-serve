<div class="bg-white rounded-xl w-full">
  <div
    class="flex justify-between items-center mb-2 p-4 border-b border-gray-300"
  >
    <h2 class="text-lg font-medium">Crear Producto</h2>
    <button (click)="closeModal()" class="text-gray-500">
      <i-lucide name="x" class="w-6 h-6"></i-lucide>
    </button>
  </div>

  <form [formGroup]="itemForm" (ngSubmit)="saveItem()" class="p-4">
    <div class="mb-4">
      <label for="name" class="block text-sm font-medium text-gray-700 mb-1"
        >Nombre</label
      >
      <input
        type="text"
        id="name"
        formControlName="name"
        class="form-input w-full p-2"
        placeholder="Nombre del producto"
      />
      <div
        *ngIf="itemForm.get('name')?.invalid && itemForm.get('name')?.touched"
        class="text-error text-xs mt-1"
      >
        El nombre es requerido
      </div>
    </div>

    <div class="grid grid-cols-2 gap-4 mb-4">
      <div>
        <label for="unit" class="block text-sm font-medium text-gray-700 mb-1"
          >Unidad</label
        >
        <input
          type="text"
          id="unit"
          formControlName="unit"
          class="form-input w-full p-2"
          placeholder="Kg, L, Unidad"
        />
        <div
          *ngIf="itemForm.get('unit')?.invalid && itemForm.get('unit')?.touched"
          class="text-error text-xs mt-1"
        >
          La unidad es requerida
        </div>
      </div>

      <div>
        <label
          for="unitCost"
          class="block text-sm font-medium text-gray-700 mb-1"
          >Costo Unitario</label
        >
        <input
          type="number"
          id="unitCost"
          formControlName="unitCost"
          class="form-input w-full p-2"
          placeholder="0.00"
          min="0"
          step="0.01"
        />
        <div
          *ngIf="
            itemForm.get('unitCost')?.invalid &&
            itemForm.get('unitCost')?.touched
          "
          class="text-error text-xs mt-1"
        >
          El costo unitario es requerido y debe ser mayor a 0
        </div>
      </div>
    </div>

    <div class="grid grid-cols-2 gap-4 mb-4">
      <div>
        <label
          for="minStockLevel"
          class="block text-sm font-medium text-gray-700 mb-1"
          >Nivel Mínimo de Stock</label
        >
        <input
          type="number"
          id="minStockLevel"
          formControlName="minStockLevel"
          class="form-input w-full p-2"
          placeholder="0"
          min="0"
          step="1"
        />
        <div
          *ngIf="
            itemForm.get('minStockLevel')?.invalid &&
            itemForm.get('minStockLevel')?.touched
          "
          class="text-error text-xs mt-1"
        >
          El nivel mínimo de stock es requerido
        </div>
      </div>

      <div>
        <label
          for="supplierId"
          class="block text-sm font-medium text-gray-700 mb-1"
          >Proveedor</label
        >
        <select
          id="supplierId"
          formControlName="supplierId"
          class="form-input w-full p-2"
        >
          <option value="" disabled>Seleccionar proveedor</option>
          <option *ngFor="let supplier of suppliers" [value]="supplier.id">
            {{ supplier.name }}
          </option>
        </select>
        <div
          *ngIf="
            itemForm.get('supplierId')?.invalid &&
            itemForm.get('supplierId')?.touched
          "
          class="text-error text-xs mt-1"
        >
          El proveedor es requerido
        </div>
      </div>
    </div>

    <div class="grid grid-cols-2 gap-4 mb-4">
      <div>
        <label
          for="location"
          class="block text-sm font-medium text-gray-700 mb-1"
          >Ubicación</label
        >
        <input
          type="text"
          id="location"
          formControlName="location"
          class="form-input w-full p-2"
          placeholder="Almacén, Cocina, etc."
        />
        <div
          *ngIf="
            itemForm.get('location')?.invalid &&
            itemForm.get('location')?.touched
          "
          class="text-error text-xs mt-1"
        >
          La ubicación es requerida
        </div>
      </div>

      <div>
        <label
          for="expiryDate"
          class="block text-sm font-medium text-gray-700 mb-1"
          >Fecha de Vencimiento</label
        >
        <input
          type="date"
          id="expiryDate"
          formControlName="expiryDate"
          class="form-input w-full p-2"
        />
      </div>
    </div>

    <div class="mb-6">
      <div class="flex items-center">
        <input
          type="checkbox"
          id="isActive"
          formControlName="isActive"
          class="form-checkbox h-4 w-4 text-primary-key"
        />
        <label for="isActive" class="ml-2 block text-sm text-gray-700"
          >Activo</label
        >
      </div>
    </div>

    <div class="flex gap-2 mt-6">
      <button
        type="button"
        (click)="closeModal()"
        class="button button-outline w-full"
      >
        Cancelar
      </button>
      <button
        type="submit"
        class="button button-primary w-full"
        [disabled]="loading"
      >
        <i-lucide
          *ngIf="loading"
          name="loader"
          class="animate-spin mr-2 h-4 w-4"
        ></i-lucide>
        Guardar
      </button>
    </div>
  </form>
</div>
